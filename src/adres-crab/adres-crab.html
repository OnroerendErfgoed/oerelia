<template>
  <require from="./styles/adres-crab.css"></require>
  <div class="adres-crab">
    <div class="row" if.bind="copyAvailable">
      <div class="small-2 columns">
        <label>Adres</label>
      </div>
      <div class="small-10 columns">
        <div class="right">
          <button class="clipboard-button copy-button button tiny" title="KopiÃ«ren" click.delegate="copyAdres()">
            <i class="fa fa-copy"></i>
          </button>
          <button class="${!copiedAdres ? 'disabled' : '' } clipboard-button paste-button button tiny" title="Plakken" click.delegate="pasteAdres()">
            <i class="fa fa-paste"></i>
          </button>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="small-push-2 small-10 columns">
        <div class="placeholder-container ${ disabled ? 'placeholder-disabled' : '' }">
          <label>Land</label>
          <select value.bind="data.land" disabled.bind="disabled">
            <option repeat.for="land of landen" model.bind="land">
              ${land.naam}
            </option>
          </select>
        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="small-push-2 small-10 columns">
        <div if.bind="data.land.code === 'BE'">
          <div class="placeholder-container ${ !data.land || disabled ? 'placeholder-disabled' : '' }">
            <label>Gemeente <span
                title="Opgelet, enkel de hoofdgemeenten (en niet de deelgemeenten) kunnen ingevuld worden.">(?)</span></label>
            <autocomplete service.bind="suggest.gemeenten" value.bind="data.gemeente & validate" label="naam"
              placeholder="gemeente" disabled.bind="!data.land || disabled" change.delegate="gemeenteChanged()">
              <template replace-part="suggestion">
                ${suggestion.naam}
              </template>
            </autocomplete>
          </div>
          <div class="placeholder-container ${ !data.gemeente || disabled ? 'placeholder-disabled' : '' }">
            <label>Postcode</label>
            <autocomplete service.bind="suggest.postcodes" value.bind="data.postcode & validate" label="nummer"
              placeholder="postcode" disabled.bind="!data.gemeente || disabled">
              <template replace-part="suggestion">
                ${suggestion.nummer}
              </template>
            </autocomplete>
          </div>
          <div class="placeholder-container ${ !data.gemeente || disabled ? 'placeholder-disabled' : '' }">
            <label>Straat</label>
            <autocomplete service.bind="suggest.straten" value.bind="data.straat & validate" label="naam"
              placeholder="straat" disabled.bind="!data.gemeente || disabled" change.delegate="straatChanged()">
              <template replace-part="suggestion">
                ${suggestion.naam}
              </template>
            </autocomplete>
          </div>
          <div class="placeholder-container ${ !data.straat || disabled ? 'placeholder-disabled' : '' }">
            <label>Huisnummer</label>
            <autocomplete show.bind="!freeHuisnummerSearch" service.bind="suggest.huisnummers" label="huisnummer"
              placeholder="huisnummer" minlength="1" disabled.bind="!data.straat || disabled"
              value.bind="data.adres & validate" type.bind="config.huisnummer.autocompleteType">
              <template replace-part="suggestion">
                ${suggestion.huisnummer}
              </template>
            </autocomplete>
            <input show.bind="freeHuisnummerSearch" type="text" value.bind="data.adres.huisnummer" placeholder="huisnummer" disabled.bind="disabled">
            <button if.bind="!freeHuisnummerSearch" click.delegate="onHuisnummerNietGevondenClicked()">Huisnummer niet gevonden?</button>
            <button if.bind="freeHuisnummerSearch" click.delegate="onHuisnummerSuggestiesClicked()">Suggesties</button>
          </div>
        </div>
        <div if.bind="data.land.code !== 'BE'">
          <div class="placeholder-container ${ disabled ? 'placeholder-disabled' : '' }">
            <label>Gemeente <span
                title="Opgelet, enkel de hoofdgemeenten (en niet de deelgemeenten) kunnen ingevuld worden.">(?)</span></label>
            <input type="text" value.bind="gemeente & validate" placeholder="gemeente"
              change.delegate="parseField(gemeente, 'gemeente')" disabled.bind="disabled">
          </div>
          <div class="placeholder-container ${ disabled ? 'placeholder-disabled' : '' }">
            <label>Postcode</label>
            <input type="text" value.bind="postcode & validate" placeholder="postcode"
              change.delegate="parseField(postcode, 'postcode')" disabled.bind="disabled">
          </div>
          <div class="placeholder-container ${ disabled ? 'placeholder-disabled' : '' }">
            <label>Straat</label>
            <input type="text" value.bind="straat & validate" placeholder="straat"
              change.delegate="parseField(straat, 'straat')" disabled.bind="disabled">
          </div>
          <div class="placeholder-container ${ disabled ? 'placeholder-disabled' : '' }">
            <label>Huisnummer</label>
            <input type="text" value.bind="huisnummer & validate" placeholder="huisnummer"
              change.delegate="parseField(huisnummer, 'huisnummer')" disabled.bind="disabled">
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="small-push-2 small-10 columns">
        <div class="placeholder-container ${ !data.adres.huisnummer || disabled ? 'placeholder-disabled' : '' }">
          <label>Busnr.</label>
          <autocomplete show.bind="!freeBusnummerSearch" service.bind="suggest.busnummers" label="busnummer" placeholder="busnummer" minlength="1"
            disabled.bind="!data.adres || disabled" value.bind="data.adres & validate"
            type.bind="config.busnummer.autocompleteType">
            <template replace-part="suggestion">
              ${suggestion.busnummer}
            </template>
          </autocomplete>
          <input show.bind="freeBusnummerSearch" type="text" value.bind="data.adres.busnummer" placeholder="busnummer">
          <template if.bind="showBusnummerLinks">
            <button if.bind="!freeBusnummerSearch" click.delegate="onBusnummerNietGevondenClicked()">Busnummer niet gevonden?</button>
            <button if.bind="freeBusnummerSearch" click.delegate="onBusnummerSuggestiesClicked()">Suggesties</button>
          </template>
        </div>
      </div>
    </div>
  </div>
</template>
